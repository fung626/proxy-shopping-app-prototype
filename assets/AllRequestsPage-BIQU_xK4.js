import{u as g,r as a,j as e,B as j}from"./index-CvO9pKPC.js";import{R as m}from"./RequestCardB-5Jaff5AR.js";import{B as v}from"./badge-CXoDSUIB.js";import{I as N}from"./input-DnWsiyUA.js";import{C as S}from"./categories-CaJuqvsn.js";import{r as y}from"./requestsSupabaseService-soQQ1D_i.js";import{S as C}from"./search-B_nDvCvE.js";import"./wishlistStore-CfNM5_Pj.js";import"./offersSupabaseService-BThdOnLG.js";import"./common-Dk-gsxo2.js";import"./ImageWithFallback--6Rpc7vq.js";import"./heart-DlE89daf.js";import"./map-pin-BzPRdFpW.js";function G(){const{t:r}=g(),[u,l]=a.useState(!1),[o,i]=a.useState("all"),[n,d]=a.useState(""),[p,h]=a.useState([]);a.useEffect(()=>{(async()=>{try{l(!0);const t=await y.getRequests();h(t)}catch(t){console.error("Error fetching requests:",t)}finally{l(!1)}})()},[]);const x=s=>{d(s.target.value)},c=p.filter(s=>{const t=o==="all"||s.category===o,f=n===""||s.title.toLowerCase().includes(n.toLowerCase());return t&&f});return e.jsxs("div",{className:"flex-1 bg-background",children:[e.jsxs("div",{className:"px-4 pt-4 pb-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(C,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),e.jsx(N,{placeholder:r("common.searchRequests"),value:n,onChange:x,className:"pl-10 pr-4 bg-input-background border-0 rounded-lg text-foreground placeholder:text-muted-foreground"})]}),e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:S.map(s=>e.jsx(v,{variant:o===s.id?"default":"secondary",className:"whitespace-nowrap cursor-pointer px-4 py-2 rounded-full",onClick:()=>i(s.id),children:r(s.translationKey)},s.id))})]}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"text-muted-foreground text-sm",children:r("common.requestsFound",{count:c.length})})}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:u?Array.from({length:8}).map((s,t)=>e.jsx(m,{loading:!0},t)):c.map(s=>e.jsx(m,{request:s},s.id))}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:r("common.noRequestsFound")}),e.jsx(j,{variant:"outline",className:"mt-4",onClick:()=>{d(""),i("all")},children:r("common.clearFilters")})]})]})]})}export{G as AllRequestsPage};
