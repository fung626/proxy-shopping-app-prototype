import{u as x,r,j as e,B as g}from"./index-CvO9pKPC.js";import{O as m}from"./OfferCard-Bdyy8poT.js";import{B as j}from"./badge-CXoDSUIB.js";import{I as v}from"./input-DnWsiyUA.js";import{C as N}from"./categories-CaJuqvsn.js";import{o as S}from"./offersSupabaseService-BThdOnLG.js";import{S as C}from"./search-B_nDvCvE.js";import"./wishlistStore-CfNM5_Pj.js";import"./requestsSupabaseService-soQQ1D_i.js";import"./ImageWithFallback--6Rpc7vq.js";import"./heart-DlE89daf.js";function D(){const{t}=x(),[f,n]=r.useState(!1),[o,i]=r.useState("all"),[l,d]=r.useState(""),[u,p]=r.useState([]);r.useEffect(()=>{(async()=>{try{n(!0);const a=await S.getOffers({category:o!=="all"?o:void 0});p(a)}catch(a){console.error("Failed to fetch offers:",a)}finally{n(!1)}})()},[o]);const h=s=>{d(s.target.value)},c=u.filter(s=>l===""||s.title.toLowerCase().includes(l.toLowerCase())||s.location?.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"flex-1 bg-background",children:[e.jsxs("div",{className:"px-4 pt-4 pb-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(C,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),e.jsx(v,{placeholder:t("common.searchOffers"),value:l,onChange:h,className:"pl-10 pr-4 bg-input-background border-0 rounded-lg text-foreground placeholder:text-muted-foreground"})]}),e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:N.map(s=>e.jsx(j,{variant:o===s.id?"default":"secondary",className:"whitespace-nowrap cursor-pointer px-4 py-2 rounded-full",onClick:()=>i(s.id),children:t(s.translationKey)},s.id))})]}),e.jsxs("div",{className:"px-4 pb-6",children:[e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"text-muted-foreground text-sm",children:t("common.offersFound",{count:c.length})})}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:f?Array.from({length:8}).map((s,a)=>e.jsx(m,{loading:!0},a)):c.map(s=>e.jsx(m,{offer:s},s.id))}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:t("common.noOffersFound")}),e.jsx(g,{variant:"outline",className:"mt-4",onClick:()=>{d(""),i("all")},children:t("common.clearFilters")})]})]})]})}export{D as AllOffersPage};
