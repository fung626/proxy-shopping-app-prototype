import{u as o,a as u,j as s,B as x}from"./index-CvO9pKPC.js";import{B as i}from"./badge-CXoDSUIB.js";import{u as d}from"./wishlistStore-CfNM5_Pj.js";import{I as g}from"./ImageWithFallback--6Rpc7vq.js";import{H as h}from"./heart-DlE89daf.js";const y=({loading:r,offer:e})=>{const{t:l}=o(),m=u(),{isWishlistItem:a,toggleWishlistItem:c}=d();return r?s.jsxs("div",{className:"p-3 rounded-xl bg-muted/50 animate-pulse",children:[s.jsx("div",{className:"w-full h-32 rounded-lg bg-muted mb-3"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]}):s.jsxs("div",{className:"p-3 rounded-xl bg-muted/50 cursor-pointer hover:bg-muted/70 transition-colors",onClick:()=>e&&m(`/offers/${e.id}`),children:[s.jsxs("div",{className:"relative mb-3",children:[s.jsx("div",{className:"w-full h-32 rounded-lg overflow-hidden",children:s.jsx(g,{src:e?.images?.[0]||"",alt:e?.title,className:"w-full h-full object-cover"})}),s.jsx(x,{size:"sm",variant:"ghost",className:`absolute top-2 right-2 h-8 w-8 p-0 bg-card/80 hover:bg-card rounded-full ${e&&a(e.id)?"text-primary":"text-muted-foreground"}`,onClick:n=>{if(n.stopPropagation(),!!e){c(e.id,"offer");try{const t=d.getState();a(e.id)?t.addRemoteItem&&t.addRemoteItem(e.id,"offer"):t.removeRemoteItem&&t.removeRemoteItem(e.id)}catch{}}},children:s.jsx(h,{className:`h-4 w-4 ${e&&a(e.id)?"fill-current":""}`})}),s.jsxs(i,{className:"absolute top-2 left-2 bg-primary text-white text-xs px-2 py-1",children:[e?.currency==="USD"?"$":e?.currency==="EUR"?"€":e?.currency==="GBP"?"£":"¥",e?.price]}),s.jsx(i,{className:"absolute bottom-2 left-2 bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 text-xs px-2 py-1",children:l("common.offer")})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm line-clamp-2 leading-tight",children:e?.title}),s.jsxs("div",{className:"grid grid-cols-2 gap-1 overflow-hidden",children:[s.jsx("span",{className:"text-xs text-muted-foreground text-ellipsis line-clamp-1",children:e?.location}),s.jsx(i,{className:"text-xs",children:e?.estimated_delivery?`${e.estimated_delivery.start} - ${e.estimated_delivery.end} ${l(`common.${e.estimated_delivery.type}`)}`:"TBD"})]})]})]})};export{y as O};
