import{j as e,r as m,u as A,a as R,h as $,c as E,B as u,A as F,M as w,U as O,P as I,b as W}from"./index-CvO9pKPC.js";import{I as z}from"./ImageWithFallback--6Rpc7vq.js";import{A as B}from"./avatar-BW8CM_Dc.js";import{h as o,E as U,Z as K}from"./moment-DDfV1m0i.js";import{c as Z}from"./chatSupabaseService-C5-xj_cv.js";import{o as G}from"./ordersSupabaseService-C1vKZQTj.js";import{r as J}from"./requestsSupabaseService-soQQ1D_i.js";import{a as Q,c as V}from"./common-Dk-gsxo2.js";import{S as h}from"./index-vsMTD7gr.js";import{S as r}from"./skeleton-D4u7SwtH.js";import{S as X,C as p}from"./share-2-A74Lo1Si.js";import{H as ee}from"./heart-DlE89daf.js";import{C as Y}from"./clock-BGCf1Cg4.js";import{E as se}from"./eye-CND1pLNp.js";import{S as D}from"./star-B1prMbWQ.js";import{D as ae}from"./dollar-sign-BSj0Cspd.js";import{M as L}from"./map-pin-BzPRdFpW.js";import{S as te}from"./shield-CXVt-qnW.js";import"./index-B46UinAq.js";import"./index-BS1Kyr__.js";import"./index-BUvxBgzt.js";import"./index-CosQv8v_.js";import"./Combination-DwCW9mbS.js";import"./index-wsE_5AEc.js";//! moment.js locale configuration
//! locale : Japanese [ja]
//! author : LI Long : https://github.com/baryon
o.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"令和",narrow:"㋿",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"平成",narrow:"㍻",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"昭和",narrow:"㍼",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"大正",narrow:"㍽",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"明治",narrow:"㍾",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"西暦",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"紀元前",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(a,s){return s[1]==="元"?1:parseInt(s[1]||a,10)},months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(a){return a==="午後"},meridiem:function(a,s,x){return a<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(a){return a.week()!==this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(a){return this.week()!==a.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(a,s){switch(s){case"y":return a===1?"元年":a+"年";case"d":case"D":case"DDD":return a+"日";default:return a}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}});//! moment.js locale configuration
//! locale : Korean [ko]
//! author : Kyungwook, Park : https://github.com/kyungw00k
//! author : Jeeeyul Lee <jeeeyul@gmail.com>
o.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(a,s){switch(s){case"d":case"D":case"DDD":return a+"일";case"M":return a+"월";case"w":case"W":return a+"주";default:return a}},meridiemParse:/오전|오후/,isPM:function(a){return a==="오후"},meridiem:function(a,s,x){return a<12?"오전":"오후"}});//! moment.js locale configuration
//! locale : Chinese (China) [zh-cn]
//! author : suupic : https://github.com/suupic
//! author : Zeno Zeng : https://github.com/zenozeng
//! author : uu109 : https://github.com/uu109
o.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,s){return a===12&&(a=0),s==="凌晨"||s==="早上"||s==="上午"?a:s==="下午"||s==="晚上"?a+12:a>=11?a:a+12},meridiem:function(a,s,x){var l=a*100+s;return l<600?"凌晨":l<900?"早上":l<1130?"上午":l<1230?"中午":l<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(a){return a.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(a){return this.week()!==a.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,s){switch(s){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",w:"1 周",ww:"%d 周",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}});//! moment.js locale configuration
//! locale : Chinese (Taiwan) [zh-tw]
//! author : Ben : https://github.com/ben-lin
//! author : Chris Lam : https://github.com/hehachris
o.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,s){if(a===12&&(a=0),s==="凌晨"||s==="早上"||s==="上午")return a;if(s==="中午")return a>=11?a:a+12;if(s==="下午"||s==="晚上")return a+12},meridiem:function(a,s,x){var l=a*100+s;return l<600?"凌晨":l<900?"早上":l<1130?"上午":l<1230?"中午":l<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(a,s){switch(s){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"週";default:return a}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}});function re(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 flex items-center justify-between p-4 safe-area-inset-top",children:[e.jsx(r,{className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{className:"w-10 h-10 rounded-full"}),e.jsx(r,{className:"w-10 h-10 rounded-full"})]})]}),e.jsxs("div",{className:"aspect-[4/3] bg-muted",children:[e.jsx(r,{className:"w-full h-full"}),e.jsx("div",{className:"absolute bottom-4 right-4",children:e.jsx(r,{className:"w-16 h-6 rounded-full"})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:[1,2,3,4].map((a,s)=>e.jsx(r,{className:"w-2 h-2 rounded-full"},s))})]})]}),e.jsxs("div",{className:"px-4 pb-40",children:[e.jsxs("div",{className:"py-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{className:"h-8 w-3/4 mb-2"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(r,{className:"h-6 w-16 rounded-full"}),e.jsx(r,{className:"h-6 w-20 rounded-full"})]})]})}),e.jsx(r,{className:"h-4 w-1/2 mb-4"}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx(r,{className:"h-4 w-28"}),e.jsx(r,{className:"h-4 w-24"}),e.jsx(r,{className:"h-4 w-20"})]})]}),e.jsx("div",{className:"border-t border-border my-6"}),e.jsxs("div",{className:"py-6",children:[e.jsx(r,{className:"h-6 w-40 mb-4"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(r,{className:"w-16 h-16 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(r,{className:"h-4 w-16"}),e.jsx(r,{className:"h-4 w-20"}),e.jsx(r,{className:"h-4 w-24"})]}),e.jsx(r,{className:"h-3 w-48"})]})]})]}),e.jsx("div",{className:"border-t border-border my-6"}),e.jsxs("div",{className:"py-6",children:[e.jsx(r,{className:"h-6 w-32 mb-4"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4,5,6].map((a,s)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(r,{className:"w-8 h-8 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{className:"h-4 w-24 mb-1"}),e.jsx(r,{className:"h-3 w-32"})]})]},s))})]}),e.jsx("div",{className:"border-t border-border my-6"}),e.jsxs("div",{className:"py-6",children:[e.jsx(r,{className:"h-6 w-40 mb-4"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{className:"h-4 w-full"}),e.jsx(r,{className:"h-4 w-full"}),e.jsx(r,{className:"h-4 w-5/6"}),e.jsx(r,{className:"h-4 w-3/4"})]})})]}),e.jsx("div",{className:"border-t border-border my-6"}),e.jsxs("div",{className:"py-6",children:[e.jsx(r,{className:"h-6 w-48 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map((a,s)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(r,{className:"h-4 w-4 rounded mt-0.5"}),e.jsx(r,{className:"h-4 flex-1"})]},s))})]}),e.jsx("div",{className:"border-t border-border my-6"}),e.jsxs("div",{className:"py-6",children:[e.jsx(r,{className:"h-6 w-40 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:[1,2,3].map((a,s)=>e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg bg-muted/30",children:[e.jsx(r,{className:"h-5 w-5 rounded mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(r,{className:"h-4 w-32 mb-2"}),e.jsx(r,{className:"h-3 w-full"})]})]},s))})]}),e.jsx("div",{className:"border-t border-border my-6"}),e.jsxs("div",{className:"py-6",children:[e.jsx(r,{className:"h-6 w-40 mb-4"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 p-4 rounded-lg bg-muted/30",children:[1,2,3].map((a,s)=>e.jsxs("div",{className:"text-center",children:[e.jsx(r,{className:"h-6 w-12 mx-auto mb-1"}),e.jsx(r,{className:"h-3 w-16 mx-auto"})]},s))})]}),e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(r,{className:"h-6 w-32"}),e.jsx(r,{className:"h-8 w-24 rounded-lg"})]}),e.jsx(r,{className:"h-4 w-64"})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t p-4 safe-area-inset-bottom",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(r,{className:"flex-1 h-12 rounded-lg"}),e.jsx(r,{className:"flex-1 h-12 rounded-lg"})]})})]})}const ke=m.memo(function(){const{t:s,language:x}=A(),l=R(),{id:f}=$(),{user:d}=E(),[t,M]=m.useState(null),[i,k]=m.useState(null),[N,j]=m.useState(!1),[g,q]=m.useState(!1),[v,b]=m.useState(!1),S=()=>l(-1),H=i?.created_at?o(i.created_at).fromNow():s("common.unknown"),T=async()=>{if(!d||!t?.user_id||!f){if(!d){l("/auth/signin");return}return}if(d.id!==t.user_id){b(!0);try{const n=await Z.getOrCreateConversation({participant_user_id:t.user_id,request_id:f});n?l(`/messages/chat/${n.id}`):console.error("Failed to create conversation")}catch(n){console.error("Error contacting client:",n)}finally{b(!1)}}},C=async()=>{if(!d||!t){if(!d){l("/auth/signin");return}return}const n={fullName:d.user_metadata?.full_name||d.email||"Customer",phone:d.user_metadata?.phone||"",street:"",addressLine2:"",city:"",state:"",postalCode:"",country:"HK"};j(!0);try{const c={agentUserId:d.id,clientUserId:t.id,requestId:t.id,currency:t.currency||"HKD",deliveryMethod:"personal_handoff",expectedMeetingLocation:"Hong Kong",deliveryAddress:n,paymentMethod:"credit_card",items:[{productName:t.title,productDescription:t.description||"",productImageUrl:t.images?.[0]||"",quantity:1,unitPrice:t.budget_min||0,requestId:t.id}]},_=await G.createOrder(c);_?l(`/orders/${_.id}`):console.error("Failed to create order")}catch(c){console.error("Error creating order:",c)}finally{j(!1)}},P=()=>{console.log("Share request:",t?.id)},y=Q(t?.currency);return m.useEffect(()=>{o.locale(x)},[x]),m.useEffect(()=>{(async()=>{if(f){j(!0);try{const c=await J.getRequestById(f);if(c){M(c);const _=await W.getUserById(c.user_id);k(_)}}catch(c){console.error("Error fetching offer data:",c)}finally{j(!1)}}})()},[f]),N?e.jsx(re,{}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-30 flex items-center justify-between p-4 safe-area-inset-top",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:S,className:"bg-white/90 backdrop-blur-sm hover:bg-white rounded-full shadow-lg",children:e.jsx(F,{className:"h-5 w-5 text-gray-900"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:P,className:"bg-white/90 backdrop-blur-sm hover:bg-white rounded-full shadow-lg",children:e.jsx(X,{className:"h-5 w-5 text-gray-900"})}),e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>q(!g),className:"bg-white/90 backdrop-blur-sm hover:bg-white rounded-full shadow-lg",children:e.jsx(ee,{className:`h-5 w-5 ${g?"fill-primary text-primary":"text-gray-900"}`})})]})]}),e.jsx("div",{className:"aspect-[4/3]",children:e.jsx(U,{slides:t?.images||[]})})]}),e.jsxs("div",{className:"px-4 pb-40",children:[e.jsxs("div",{className:"py-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground pr-4 mb-2",children:t?.title||s("requestDetails.request")}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${t?.status==="active"?"bg-green-100 text-green-700":t?.status==="fulfilled"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:t?.status?s(`requestDetails.${t.status}`):s("requestDetails.active")}),t?.urgency&&e.jsxs("div",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ${t.urgency==="urgent"?"bg-red-100 text-red-700":t.urgency==="normal"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:[t.urgency==="urgent"&&e.jsx(K,{className:"h-3 w-3"}),e.jsx("span",{children:s(`common.urgency${V(t.urgency)}`)})]})]})]})}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:[t?.category?s(`categories.${t.category}`):s("common.general"),t?.product_origin&&e.jsxs(e.Fragment,{children:[" • ",s(`countries.${t.product_origin}`)]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs("span",{children:[s("requestDetails.postedDate")," ",o(t?.created_at).fromNow()]})]}),t?.offers&&t.offers.length>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.offers.length," ",t.offers.length===1?s("common.offer"):s("common.offers")]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsxs("span",{children:["0 ",s("requestDetails.views")]})]})]})]}),e.jsx(h,{}),e.jsxs("div",{className:"py-6",children:[e.jsxs("h3",{className:"font-semibold mb-4",children:[s("requestDetails.requestedBy")," ",i?.nickname]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(B,{className:"flex items-center justify-center w-16 h-16 bg-slate-50",children:i?.image?e.jsx(z,{src:i?.image,alt:i?.nickname||"Client Avatar",className:"w-full h-full object-cover"}):e.jsx(O,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(D,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium",children:i?.rating||s("offerDetails.noRatings")})]}),e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("span",{className:"text-muted-foreground",children:`${i?.reviews??0} ${s("common.reviews")}`||s("common.noReviews")}),i?.verified&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(p,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-green-600 text-sm",children:s("common.verified")})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:`${s("common.memberSince")} ${H} • ${i?.success_rate??0}% ${s("offerDetails.successRate")}`})]})]})]}),e.jsx(h,{}),e.jsxs("div",{className:"py-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:s("requestDetails.requestFeatures")}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[(t?.budget_min||t?.budget_max)&&e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(ae,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s("requestDetails.budgetRange")}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[y,t?.budget_min?.toFixed(2)||"0.00"," - ",y,t?.budget_max?.toFixed(2)||"0.00"]})]})]}),t?.designated_purchasing_location&&e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(L,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s("requestDetails.purchaseLocation")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.designated_purchasing_location})]})]}),t?.expected_delivery_location&&e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(L,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s("requestDetails.deliveryLocation")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.expected_delivery_location})]})]}),t?.delivery_method&&e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(I,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s("requestDetails.deliveryMethod")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.delivery_method==="personal_handoff"?s("requestDetails.deliverInPerson"):s("requestDetails.shipToAddress")})]})]}),t?.expected_delivery&&e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(Y,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s("requestDetails.expectedDelivery")}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.expected_delivery.start," -"," ",t.expected_delivery.end," ",t.expected_delivery.unit]})]})]})]})]}),e.jsx(h,{}),e.jsxs("div",{className:"py-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:s("requestDetails.aboutThisRequest")}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"space-y-3",children:e.jsx("p",{className:"text-foreground leading-relaxed",children:t?.description||s("requestDetails.noRequirements")})})})]}),e.jsx(h,{}),t?.specific_requirements&&t.specific_requirements.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:s("requestDetails.specificRequirements")}),e.jsx("div",{className:"space-y-3",children:t.specific_requirements.map((n,c)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(p,{className:"h-4 w-4 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm leading-relaxed",children:n})]},c))})]}),e.jsx(h,{})]}),e.jsxs("div",{className:"py-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:s("requestDetails.buyerProtection")}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg bg-green-50 dark:bg-green-950/20",children:[e.jsx(te,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 dark:text-green-100 text-sm",children:s("requestDetails.buyerProtection")}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:s("requestDetails.buyerProtectionDesc")})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg bg-blue-50 dark:bg-blue-950/20",children:[e.jsx(p,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 text-sm",children:s("requestDetails.securePayment")}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:s("requestDetails.securePaymentDesc")})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-4 rounded-lg bg-purple-50 dark:bg-purple-950/20",children:[e.jsx(D,{className:"h-5 w-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-900 dark:text-purple-100 text-sm",children:s("requestDetails.verifiedAgents")}),e.jsx("p",{className:"text-xs text-purple-700 dark:text-purple-300 mt-1",children:s("requestDetails.verifiedAgentsDesc")})]})]})]})]}),e.jsx(h,{}),e.jsxs("div",{className:"py-6",children:[e.jsxs("h3",{className:"font-semibold mb-4",children:[i?.nickname,s("requestDetails.clientStats")]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-foreground",children:i?.total_orders??0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s("requestDetails.totalRequests")})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-semibold text-foreground",children:[i?.success_rate??0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s("common.successRate")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-foreground",children:i?.rating??0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s("common.rating")})]})]})]}),t?.offers&&t.offers.length>0&&e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold",children:[s("requestDetails.offerCount")," (",t.offers.length,")"]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>l(`/requests/${t.id}/offers`),children:s("requestDetails.viewOffers")})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.offers.length," ",t.offers.length===1?s("common.agent"):s("common.agents")," ",t.offers.length===1?"has":"have"," ","offered to help with this request"]})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t p-4 safe-area-inset-bottom",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(u,{variant:"outline",className:"flex-1",onClick:T,disabled:v||!t||t.user_id===d?.id,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),s(v?"common.loading":"requestDetails.contactClient")]}),e.jsx(u,{className:"flex-1",onClick:C,disabled:N||!t||t.user_id===d?.id,children:s("requestDetails.makeOffer")})]})})]})});export{ke as RequestDetailsPage};
