import{u as A,a as S,r as m,j as e,B as F}from"./index-CvO9pKPC.js";import{A as R,a as L,b as I}from"./avatar-BW8CM_Dc.js";import{G as $,C as D,L as E}from"./language-multi-select-BO037zF_.js";import{I as d}from"./input-DnWsiyUA.js";import{P as q}from"./phone-input-BD6KTjnM.js";import{T as V}from"./textarea-TEs07ww8.js";import{C as G}from"./camera-BjJORJ-6.js";import{X as T}from"./x-wt5hBkWR.js";import{C as U}from"./check-BygKOcWJ.js";import"./index-B46UinAq.js";import"./index-BS1Kyr__.js";import"./index-BUvxBgzt.js";import"./countries-BdmsY0m-.js";import"./select-Bn-NFenP.js";import"./index-vsMTD7gr.js";import"./index-CosQv8v_.js";import"./Combination-DwCW9mbS.js";import"./index-wsE_5AEc.js";import"./label-Cqb5pUVi.js";import"./index-BdAoUvTi.js";import"./badge-CXoDSUIB.js";import"./index-tYtXYGJ5.js";import"./dialog-DWMkWXSP.js";import"./search-B_nDvCvE.js";function ue({user:r}){const{t:s}=A(),b=S(),[x,h]=m.useState(!1),[v,c]=m.useState(!1),[t,N]=m.useState({firstName:r.name?.split(" ")[0]||"",lastName:r.name?.split(" ").slice(1).join(" ")||"",nickname:r.nickname||"",gender:r.gender||"",email:r.email||"",phone:r.phone?r.phone.replace(/^\+\d+/,""):"",countryCode:r.phone&&r.phone.match(/^\+\d+/)?.[0]||"+1",bio:r.bio||"",country:r.country||"",languages:r.languages||[]}),[i,p]=m.useState({}),[B,g]=m.useState(null),[u,f]=m.useState(r.avatar||""),l=(a,o)=>{N(n=>({...n,[a]:o})),c(!0),i[a]&&p(n=>({...n,[a]:""}))},j=a=>{const o=a.target.files?.[0];if(o){g(o),c(!0);const n=new FileReader;n.onload=C=>{const w=C.target?.result;f(w)},n.readAsDataURL(o)}},k=()=>{g(null),f(""),c(!0)},P=()=>{const a={};return t.firstName.trim()||(a.firstName=s("validation.firstNameRequired")),t.lastName.trim()||(a.lastName=s("validation.lastNameRequired")),t.nickname.trim()||(a.nickname=s("validation.nicknameRequired")),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(a.email=s("validation.emailInvalid")):a.email=s("validation.emailRequired"),t.phone&&!/^[\d\s\-\(\)]+$/.test(t.phone)&&(a.phone=s("validation.phoneInvalid")),p(a),Object.keys(a).length===0},y=async()=>{if(P()){h(!0);try{await new Promise(o=>setTimeout(o,1500));const a={...r,name:`${t.firstName} ${t.lastName}`,nickname:t.nickname,gender:t.gender,email:t.email,phone:t.phone?`${t.countryCode}${t.phone.replace(/\D/g,"")}`:"",bio:t.bio,country:t.country,languages:t.languages};a.avatar=u,b("/profile")}catch(a){console.error("Failed to save profile:",a)}finally{h(!1)}}};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"px-4 py-4",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(R,{className:"w-20 h-20",children:[e.jsx(L,{src:u,alt:"Profile picture"}),e.jsx(I,{className:"bg-red-100 text-red-600",children:r.name?r.name.split(" ").map(a=>a[0]).join("").toUpperCase():"U"})]}),e.jsx("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 w-7 h-7 bg-primary rounded-full flex items-center justify-center cursor-pointer hover:bg-primary/90 transition-colors shadow-lg",children:e.jsx(G,{className:"h-4 w-4 text-primary-foreground"})}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:j,className:"hidden"}),u&&e.jsx("button",{type:"button",onClick:k,className:"absolute -top-2 -right-2 w-6 h-6 bg-destructive rounded-full flex items-center justify-center hover:bg-destructive/90 transition-colors shadow-lg",children:e.jsx(T,{className:"h-3 w-3 text-destructive-foreground"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:s("editProfile.title")}),e.jsx("p",{className:"text-muted-foreground",children:s("editProfile.description")})]})]})}),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[s("editProfile.firstName")," *"]}),e.jsx(d,{id:"firstName",value:t.firstName,onChange:a=>l("firstName",a.target.value),placeholder:s("editProfile.firstNamePlaceholder"),className:"bg-input-background border-border"}),i.firstName&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.firstName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[s("editProfile.lastName")," *"]}),e.jsx(d,{id:"lastName",value:t.lastName,onChange:a=>l("lastName",a.target.value),placeholder:s("editProfile.lastNamePlaceholder"),className:"bg-input-background border-border"}),i.lastName&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.lastName})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[s("editProfile.nickname")," *"]}),e.jsx(d,{id:"nickname",value:t.nickname,onChange:a=>l("nickname",a.target.value),placeholder:s("editProfile.nicknamePlaceholder"),className:"bg-input-background border-border"}),i.nickname&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.nickname})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-3",children:s("editProfile.gender")}),e.jsx($,{value:t.gender,onValueChange:a=>l("gender",a),variant:"compact"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[s("editProfile.email")," *"]}),e.jsx(d,{id:"email",type:"email",value:t.email,onChange:a=>l("email",a.target.value),placeholder:s("editProfile.emailPlaceholder"),className:"bg-input-background border-border"}),i.email&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s("editProfile.phone")}),e.jsx(q,{phoneValue:t.phone,onPhoneChange:a=>l("phone",a),countryCode:t.countryCode,onCountryCodeChange:a=>l("countryCode",a),placeholder:s("editProfile.phonePlaceholder")}),i.phone&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s("editProfile.country")}),e.jsx(D,{value:t.country,onValueChange:a=>l("country",a),placeholder:s("editProfile.selectCountry"),className:"bg-input-background border-border"}),i.country&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:i.country})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s("editProfile.bio")}),e.jsx(V,{id:"bio",value:t.bio,onChange:a=>l("bio",a.target.value),placeholder:s("editProfile.bioPlaceholder"),className:"bg-input-background border-border min-h-[100px] resize-none",maxLength:500}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[i.bio&&e.jsx("p",{className:"text-sm text-destructive",children:i.bio}),e.jsxs("p",{className:"text-xs text-muted-foreground ml-auto",children:[t.bio.length,"/500"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s("editProfile.languages")}),e.jsx(E,{value:t.languages,onValueChange:a=>l("languages",a),placeholder:s("editProfile.selectLanguages"),className:"bg-input-background border-border",maxSelected:5}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("editProfile.languagesHelp")})]})]}),e.jsx("div",{className:"flex space-x-3 mt-8 mb-8",children:e.jsx(F,{onClick:y,className:"flex-1",disabled:x||!v,children:x?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:s("editProfile.saving")})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:s("common.save")})]})})})]})})}export{ue as EditAccountPage};
