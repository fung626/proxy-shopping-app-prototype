import{d as ee,u as E,j as e,r as x,B as d,c as A,P as H,t as k,s as F,U as te}from"./index-CvO9pKPC.js";import{S as re}from"./SignInView-CA7AgJIx.js";import{U as Y}from"./upload-Dlq4WhJi.js";import{X as K}from"./x-wt5hBkWR.js";import{B as se}from"./badge-CXoDSUIB.js";import{I as m}from"./input-DnWsiyUA.js";import{S as I,a as T,b as L,c as U,d as $}from"./select-Bn-NFenP.js";import{T as Q}from"./textarea-TEs07ww8.js";import{o as ae}from"./offersSupabaseService-BThdOnLG.js";import{C as W}from"./categories-CaJuqvsn.js";import{D as B}from"./dollar-sign-BSj0Cspd.js";import{M as _}from"./map-pin-BzPRdFpW.js";import{C as ie}from"./camera-BjJORJ-6.js";import{C as oe}from"./countries-BdmsY0m-.js";import{r as ne}from"./requestsSupabaseService-soQQ1D_i.js";import{P as ce}from"./plus-BEKpnawi.js";import"./index-vsMTD7gr.js";import"./index-CosQv8v_.js";import"./index-B46UinAq.js";import"./Combination-DwCW9mbS.js";import"./index-BUvxBgzt.js";import"./index-BS1Kyr__.js";import"./index-wsE_5AEc.js";import"./check-BygKOcWJ.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],de=ee("shopping-bag",le);function J({type:r,isVisible:c}){const{t:l}=E();return c?e.jsx("div",{className:"fixed inset-0 bg-background z-50 flex flex-col",children:e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:l(r==="request"?"createRequest.creatingYourRequest":"createOffer.creatingYourOffer")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:l(r==="request"?"createRequest.creatingRequestDescription":"createOffer.creatingOfferDescription")})]})})}):null}function X({files:r,previews:c,maxFiles:l=5,onFilesChange:b,onPreviewsChange:q,accept:y="image/*",label:R,description:P,icon:w,buttonText:t}){const{t:i}=E(),f=x.useRef(null),D=g=>{const h=Array.from(g.target.files||[]);if(h.length===0)return;const N=l-r.length;if(N<=0)return;const S=h.slice(0,N);b([...r,...S]);const O=S.filter(a=>a.type.startsWith("image/"));if(O.length>0){const a=[];let n=0;O.forEach(u=>{const v=new FileReader;v.onloadend=()=>{a.push(v.result),n++,n===O.length&&q([...c,...a])},v.onerror=()=>{console.error("Error reading file:",u.name),n++},v.readAsDataURL(u)})}f.current&&(f.current.value="")},p=g=>{b(r.filter((h,N)=>N!==g)),q(c.filter((h,N)=>N!==g))},C=()=>{f.current?.click()};return e.jsxs("div",{children:[R&&e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:R}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[w||e.jsx(Y,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),P&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:P}),e.jsx("input",{ref:f,type:"file",className:"hidden",multiple:!0,accept:y,onChange:D,disabled:r.length>=l}),e.jsx(d,{type:"button",variant:"outline",size:"sm",onClick:C,disabled:r.length>=l,children:t||i("common.chooseFile")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:i("common.filesSelected",{count:r.length,total:l})})]}),r.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:r.map((g,h)=>e.jsxs("div",{className:"relative border border-border rounded-lg p-2",children:[g.type.startsWith("image/")&&c[h]?e.jsx("img",{src:c[h],alt:g.name,className:"w-full h-24 object-cover rounded"}):e.jsx("div",{className:"w-full h-24 bg-muted rounded flex items-center justify-center",children:e.jsx(Y,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:g.name}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>p(h),className:"absolute top-1 right-1 h-6 w-6 p-0 bg-background/80 hover:bg-destructive hover:text-destructive-foreground",children:e.jsx(K,{className:"h-4 w-4"})})]},h))})]})}const ue=[{id:"USD",name:"USD ($)"},{id:"EUR",name:"EUR (€)"},{id:"GBP",name:"GBP (£)"},{id:"JPY",name:"JPY (¥)"},{id:"KRW",name:"KRW (₩)"},{id:"CNY",name:"CNY (¥)"},{id:"HKD",name:"HKD (HK$)"},{id:"SGD",name:"SGD (S$)"},{id:"AUD",name:"AUD (A$)"},{id:"CAD",name:"CAD (C$)"}],me=[{value:"days",label:"days"},{value:"weeks",label:"weeks"},{value:"months",label:"months"}],G={title:"",description:"",category:"",price:"",currency:"HKD",location:"",availableQuantity:"1",estimatedDelivery:{start:0,end:0,type:"days"},specifications:[],tags:[],deliveryOptions:["personal_handoff"],images:[]};function xe(){const{t:r}=E(),[c,l]=x.useState(!0),[b,q]=x.useState(!1),[y,R]=x.useState([]),[P,w]=x.useState([]),[t,i]=x.useState(G),[f,D]=x.useState(""),[p,C]=x.useState(""),{user:g}=A(),h=async s=>{const o=[];for(const j of s)try{const M=j.name.split(".").pop(),V=`offer-images/${`${g?.id}-${Date.now()}-${Math.random().toString(36).substring(2)}.${M}`}`,{error:z}=await F.storage.from("uploads").upload(V,j);if(z)throw z;const{data:{publicUrl:Z}}=F.storage.from("uploads").getPublicUrl(V);o.push(Z)}catch(M){console.error("Error uploading file:",M),k.error(r("createOffer.uploadError"))}return o},N=()=>{i(G),R([]),w([])},S=()=>{f.trim()&&(i({...t,specifications:[...t.specifications,f.trim()]}),D(""))},O=s=>{i({...t,specifications:t.specifications.filter((o,j)=>j!==s)})},a=()=>{p.trim()&&!t.tags.includes(p.trim())&&(i({...t,tags:[...t.tags,p.trim()]}),C(""))},n=s=>{i({...t,tags:t.tags.filter(o=>o!==s)})},u=()=>!!(t.title&&t.description&&t.category&&t.price&&t.location),v=async s=>{if(s.preventDefault(),!g?.id){k.error(r("createOffer.authError"),{description:r("createOffer.authErrorDescription")});return}q(!0);try{const o=y.length>0?await h(y):[],j={user_id:g.id,title:t.title,description:t.description,category:t.category,price:parseFloat(t.price),currency:t.currency,location:t.location,shopping_location:t.location,available_quantity:parseInt(t.availableQuantity),estimated_delivery:t.estimatedDelivery,specifications:t.specifications,tags:t.tags,delivery_options:t.deliveryOptions.length>0?t.deliveryOptions:["personal_handoff"],images:o,status:"active"};await ae.createOffer(j),k.success(r("createOffer.successTitle"),{description:r("createOffer.successDescription")}),N()}catch(o){console.error("Error creating offer:",o),k.error(r("createOffer.errorTitle"),{description:r("createOffer.errorDescription")})}finally{q(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(J,{type:"offer",isVisible:b}),e.jsxs("div",{className:"px-4 pt-0 pb-4",children:[c&&e.jsx("div",{className:"mt-4 mb-4 p-4 bg-muted/50 rounded-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(H,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground mb-1",children:r("createOffer.infoBoxTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r("createOffer.infoBoxDescription")})]})]}),e.jsx(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground ml-2",onClick:()=>l(!1),children:e.jsx(K,{className:"h-4 w-4"})})]})}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createOffer.offerTitle")," *"]}),e.jsx(m,{placeholder:r("createOffer.offerTitlePlaceholder"),value:t.title,onChange:s=>i({...t,title:s.target.value}),className:"bg-input-background border-border",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createOffer.category")," *"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:W.map(s=>{const o=t.category===s.id,j=s.icon;return e.jsxs(d,{type:"button",variant:o?"default":"outline",onClick:()=>i({...t,category:s.id}),className:"h-auto py-3 px-4 text-left justify-start",children:[e.jsx(j,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("div",{className:"text-sm font-medium",children:r(s.translationKey)})]},s.id)})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createOffer.price")," *"]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[e.jsxs("div",{className:"col-span-3 relative",children:[e.jsx(B,{className:"absolute left-3 top-[14px] h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:r("createOffer.enterPrice"),value:t.price,onChange:s=>i({...t,price:s.target.value}),className:"pl-10 bg-input-background border-border",type:"number",step:"0.01",required:!0})]}),e.jsx("div",{className:"col-span-3",children:e.jsxs(I,{value:t.currency,onValueChange:s=>i({...t,currency:s}),children:[e.jsx(T,{className:"bg-input-background border-border",children:e.jsx(L,{})}),e.jsx(U,{children:ue.map(s=>e.jsx($,{value:s.id,children:s.name},s.id))})]})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createOffer.yourLocation")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-[14px] h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:r("createOffer.locationPlaceholder"),value:t.location,onChange:s=>i({...t,location:s.target.value}),className:"pl-10 bg-input-background border-border",required:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createOffer.locationDescription")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createOffer.serviceDescription")," *"]}),e.jsx(Q,{placeholder:r("createOffer.serviceDescriptionPlaceholder"),value:t.description,onChange:s=>i({...t,description:s.target.value}),className:"bg-input-background border-border min-h-[100px]",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("createOffer.productSpecifications")}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(m,{placeholder:r("createOffer.addSpecificationPlaceholder"),value:f,onChange:s=>D(s.target.value),className:"bg-input-background border-border flex-1",onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),S())}}),e.jsx(d,{type:"button",onClick:S,className:"!h-full px-4",disabled:!f.trim(),children:r("createOffer.add")})]}),t.specifications.length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:t.specifications.map((s,o)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0 mt-1"}),e.jsx("span",{className:"flex-1 text-sm",children:s}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>O(o),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:"×"})]},o))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("createOffer.specificationsDescription")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("createOffer.availableQuantity")}),e.jsx(m,{placeholder:r("createOffer.quantityPlaceholder"),value:t.availableQuantity,onChange:s=>i({...t,availableQuantity:s.target.value}),className:"bg-input-background border-border",type:"number",min:"1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createOffer.quantityDescription")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("createOffer.estimatedDeliveryTime")}),e.jsxs("div",{className:"grid grid-cols-9 gap-3",children:[e.jsx(m,{placeholder:r("createOffer.deliveryTimePlaceholder"),value:t.estimatedDelivery.start,onChange:s=>i({...t,estimatedDelivery:{...t.estimatedDelivery,start:Number(s.target.value)}}),className:"col-span-3 bg-input-background border-border"}),e.jsx(m,{placeholder:r("createOffer.deliveryTimePlaceholder"),value:t.estimatedDelivery.end,onChange:s=>i({...t,estimatedDelivery:{...t.estimatedDelivery,end:Number(s.target.value)}}),className:"col-span-3 bg-input-background border-border"}),e.jsx("div",{className:"col-span-3",children:e.jsxs(I,{value:t.estimatedDelivery.type,onValueChange:s=>i({...t,estimatedDelivery:{...t.estimatedDelivery,type:s}}),children:[e.jsx(T,{className:"bg-input-background border-border",children:e.jsx(L,{})}),e.jsx(U,{children:me.map(s=>e.jsx($,{value:s.value,children:r(`common.${s.label}`)},s.value))})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createOffer.deliveryTimeDescription")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("createOffer.tags")}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(m,{placeholder:r("createOffer.tagPlaceholder"),value:p,onChange:s=>C(s.target.value),className:"bg-input-background border-border flex-1",onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),a())}}),e.jsx(d,{type:"button",onClick:a,className:"!h-full px-4",disabled:!p.trim()||t.tags.includes(p.trim()),children:r("createOffer.add")})]}),t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:t.tags.map((s,o)=>e.jsxs(se,{variant:"secondary",className:"text-xs",children:[s,e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>n(s),className:"h-4 w-4 p-0 ml-2 text-muted-foreground hover:text-destructive",children:"×"})]},o))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("createOffer.tagsDescription")})]}),e.jsx(X,{files:y,previews:P,maxFiles:5,onFilesChange:R,onPreviewsChange:w,accept:"image/*",label:r("createOffer.productImages"),description:r("createOffer.uploadPhotos"),icon:e.jsx(ie,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),buttonText:r("createOffer.chooseImages")}),e.jsx("div",{className:"pt-4",children:e.jsx(d,{type:"submit",className:"w-full h-12 text-base",disabled:b||!u(),children:r(b?"create.creatingOffer":"createOffer.createOffer")})})]})]})]})}function fe(){const{t:r}=E(),[c,l]=x.useState(!0),[b,q]=x.useState(!1),[y,R]=x.useState([]),[P,w]=x.useState([]),[t,i]=x.useState({title:"",description:"",specificRequirements:[],category:"",quantity:"1",budgetMin:"",budgetMax:"",productOrigin:"",designatedPurchasingLocation:"",expectedMeetingLocation:"",shippingAddress:{fullName:"",addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:""},deliveryMethod:"personal_handoff"}),[f,D]=x.useState(""),{user:p}=A(),C=()=>{f.trim()&&(i({...t,specificRequirements:[...t.specificRequirements,f.trim()]}),D(""))},g=a=>{i({...t,specificRequirements:t.specificRequirements.filter((n,u)=>u!==a)})},h=()=>{if(!t.title||!t.description||!t.category)return!1;if(t.deliveryMethod==="personal_handoff")return!!t.expectedMeetingLocation;if(t.deliveryMethod==="ship"){const{fullName:a,addressLine1:n,city:u,state:v,postalCode:s,country:o}=t.shippingAddress;return!!(a&&n&&u&&v&&s&&o)}return!0},N=async a=>{const n=[];for(const u of a)try{const v=u.name.split(".").pop(),o=`request-images/${`${p?.id}-${Date.now()}-${Math.random().toString(36).substring(2)}.${v}`}`,{error:j}=await F.storage.from("uploads").upload(o,u);if(j)throw j;const{data:{publicUrl:M}}=F.storage.from("uploads").getPublicUrl(o);n.push(M)}catch(v){console.error("Error uploading file:",v),k.error(r("createRequest.uploadError"))}return n},S=()=>{i({title:"",description:"",specificRequirements:[],category:"",quantity:"1",budgetMin:"",budgetMax:"",productOrigin:"",designatedPurchasingLocation:"",expectedMeetingLocation:"",shippingAddress:{fullName:"",addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:""},deliveryMethod:"personal_handoff"}),R([]),w([])},O=async a=>{if(a.preventDefault(),!p){k.error(r("auth.authenticationError"),{description:r("auth.authCreateRequestError")});return}q(!0);try{const n=y.length>0?await N(y):[],u={user_id:p.id,user_name:p.nickname||p.name||"User",title:t.title,description:t.description,specific_requirements:t.specificRequirements,category:t.category,budget_min:t.budgetMin?parseFloat(t.budgetMin):void 0,budget_max:t.budgetMax?parseFloat(t.budgetMax):void 0,currency:"HKD",product_origin:t.productOrigin,designated_purchasing_location:t.designatedPurchasingLocation,expected_delivery_location:t.expectedMeetingLocation,expected_delivery:{start:"7",end:"14",unit:"days"},shipping_address:t.deliveryMethod==="ship"?t.shippingAddress:void 0,delivery_method:t.deliveryMethod,images:n,status:"active",urgency:"normal"};await ne.createRequest(u),k.success(r("createRequest.successMessage"),{description:r("createRequest.successMessageDescription")}),S()}catch(n){console.error("Error creating request:",n),k.error(r("createRequest.errorMessage"),{description:r("createRequest.errorMessageDescription")})}finally{q(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(J,{type:"request",isVisible:b}),e.jsxs("div",{className:"px-4 pt-0 pb-4",children:[c&&e.jsx("div",{className:"mt-4 mb-4 p-4 bg-muted/50 rounded-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(ce,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground mb-1",children:r("createRequest.infoBoxTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r("createRequest.infoBoxDescription")})]})]}),e.jsx(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground ml-2",onClick:()=>l(!1),children:e.jsx(K,{className:"h-4 w-4"})})]})}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createRequest.requestTitle")," *"]}),e.jsx(m,{placeholder:r("createRequest.requestTitlePlaceholder"),value:t.title,onChange:a=>i({...t,title:a.target.value}),className:"bg-input-background border-border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("createRequest.budgetRange")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:r("createRequest.budgetMinPlaceholder"),value:t.budgetMin,onChange:a=>i({...t,budgetMin:a.target.value}),className:"pl-10 bg-input-background border-border",type:"number"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:r("createRequest.budgetMaxPlaceholder"),value:t.budgetMax,onChange:a=>i({...t,budgetMax:a.target.value}),className:"pl-10 bg-input-background border-border",type:"number"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:r("createRequest.budgetRangeDescription")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("createRequest.productOrigin")}),e.jsxs(I,{value:t.productOrigin,onValueChange:a=>i({...t,productOrigin:a}),children:[e.jsx(T,{className:"bg-input-background border-border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx(L,{placeholder:r("createRequest.selectCountryRegion")})]})}),e.jsx(U,{children:oe.map(a=>e.jsx($,{value:a.id,children:r(a.translationKey)},a.id))})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createRequest.productOriginDescription")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("createRequest.designatedPurchasingLocation")}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:r("createRequest.purchasingLocationPlaceholder"),value:t.designatedPurchasingLocation,onChange:a=>i({...t,designatedPurchasingLocation:a.target.value}),className:"pl-10 bg-input-background border-border"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createRequest.purchasingLocationDescription")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createRequest.category")," *"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:W.map(a=>{const n=t.category===a.id,u=a.icon;return e.jsxs(d,{type:"button",variant:n?"default":"outline",onClick:()=>i({...t,category:a.id}),className:"h-auto py-3 px-4 text-left justify-start",children:[e.jsx(u,{className:"h-4 w-4 text-muted-foreground mr-2"}),e.jsx("div",{className:"text-sm font-medium",children:r(a.translationKey)})]},a.id)})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createRequest.quantity")," *"]}),e.jsx(m,{placeholder:r("createRequest.quantityPlaceholder"),value:t.quantity,onChange:a=>i({...t,quantity:a.target.value}),className:"bg-input-background border-border",type:"number",min:"1",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createRequest.quantityDescription")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createRequest.description")," *"]}),e.jsx(Q,{placeholder:r("createRequest.descriptionPlaceholder"),value:t.description,onChange:a=>i({...t,description:a.target.value}),className:"bg-input-background border-border min-h-[80px]",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:r("createRequest.specificRequirements")}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(m,{placeholder:r("createRequest.requirementPlaceholder"),value:f,onChange:a=>D(a.target.value),className:"bg-input-background border-border flex-1",onKeyPress:a=>{a.key==="Enter"&&(a.preventDefault(),C())}}),e.jsx(d,{type:"button",className:"!h-full px-4",onClick:C,disabled:!f.trim(),children:r("createRequest.add")})]}),t.specificRequirements.length>0&&e.jsx("div",{className:"space-y-2 mb-3",children:t.specificRequirements.map((a,n)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0 mt-1"}),e.jsx("span",{className:"flex-1 text-sm",children:a}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(n),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:"×"})]},n))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("createRequest.requirementsDescription")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(te,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-medium text-foreground",children:r("createRequest.expectedMeetingLocation")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[r("createRequest.location")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:r("createRequest.meetingLocationPlaceholder"),value:t.expectedMeetingLocation,onChange:a=>i({...t,expectedMeetingLocation:a.target.value}),className:"pl-10 bg-input-background border-border",required:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("createRequest.meetingLocationDescription")})]})]}),e.jsx(X,{files:y,previews:P,maxFiles:5,onFilesChange:R,onPreviewsChange:w,accept:"image/*",label:r("createRequest.attachments"),description:r("createRequest.uploadDescription"),buttonText:r("createRequest.chooseFiles")}),e.jsx("div",{className:"pt-4",children:e.jsx(d,{type:"submit",className:"w-full h-12 text-base",disabled:b||!h(),children:r(b?"create.creatingRequest":"createRequest.createRequest")})})]})]})]})}function $e(){const{t:r}=E(),[c,l]=x.useState("request"),{user:b}=A();return b?e.jsxs("div",{className:"flex-1 bg-background pb-[74px] flex flex-col",children:[e.jsxs("div",{className:"px-4 pt-12 pb-2 flex-shrink-0",children:[e.jsx("h1",{className:"text-3xl font-semibold text-foreground mb-6",children:r("nav.create")}),e.jsx("div",{className:"bg-muted/50 rounded-lg p-1 mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs(d,{variant:c==="request"?"default":"ghost",className:`justify-center ${c==="request"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,onClick:()=>l("request"),children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),r("create.request")]}),e.jsxs(d,{variant:c==="offer"?"default":"ghost",className:`justify-center ${c==="offer"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,onClick:()=>l("offer"),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),r("create.offer")]})]})})]}),e.jsx("div",{className:"flex-1 min-h-0",children:c==="request"?e.jsx(fe,{}):e.jsx(xe,{})})]}):e.jsx(re,{title:"nav.create",description:"create.description",signInPrompt:"create.signInPrompt",signInDescription:"create.signInDescription",signInButtonText:"profile.signIn"})}export{$e as CreateTab};
