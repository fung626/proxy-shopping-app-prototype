import{a as v,u as y,G as P,r as o,j as e,B as u,w as S}from"./index-CvO9pKPC.js";import{A as x}from"./input-DnWsiyUA.js";import{L as h}from"./label-Cqb5pUVi.js";import{C}from"./circle-check-big-Dh9XEviq.js";import{L as k}from"./lock-CQHeIs6o.js";import"./index-BUvxBgzt.js";function F(){const f=v(),{t:s}=y(),[p]=P(),[r,w]=o.useState(""),[n,g]=o.useState(""),[c,i]=o.useState(!1),[l,a]=o.useState(""),[j,b]=o.useState(!1),N=async t=>{if(t.preventDefault(),a(""),!r||!n){a(s("auth.enterPasswordAndConfirm"));return}if(r!==n){a(s("auth.passwordsDoNotMatch"));return}const m=p.get("code");if(!m){a(s("auth.invalidResetToken"));return}i(!0);try{const{error:d}=await S.updatePassword(m,r);if(d)throw new Error(d.message);b(!0)}catch(d){a(d.message||s("auth.resetPasswordFailed"))}finally{i(!1)}};return j?e.jsx("div",{className:"min-h-screen bg-background flex flex-col",children:e.jsxs("div",{className:"flex-1 px-4 py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(C,{className:"h-8 w-8 text-green-600"})}),e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-3",children:s("auth.passwordResetSuccess")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:s("auth.passwordResetSuccessDescription")}),e.jsx(u,{onClick:()=>f("/auth/signin"),className:"w-full bg-primary hover:bg-primary/90",children:s("auth.backToSignIn")})]})]})}):e.jsx("div",{className:"min-h-screen bg-background flex flex-col",children:e.jsx("div",{className:"flex-1 px-4 py-6",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(k,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:s("auth.resetPasswordTitle")}),e.jsx("p",{className:"text-muted-foreground",children:s("auth.resetPasswordDescription")})]}),l&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:e.jsx("p",{className:"text-red-800 text-sm",children:l})}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(h,{htmlFor:"password",className:"text-sm font-medium text-foreground",children:s("auth.newPassword")}),e.jsx(x,{id:"password",type:"password",value:r,onChange:t=>w(t.target.value),placeholder:s("auth.enterNewPassword"),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(h,{htmlFor:"confirmPassword",className:"text-sm font-medium text-foreground",children:s("auth.confirmPassword")}),e.jsx(x,{id:"confirmPassword",type:"password",value:n,onChange:t=>g(t.target.value),placeholder:s("auth.confirmNewPassword"),required:!0})]}),e.jsx(u,{type:"submit",className:"w-full h-12 bg-primary hover:bg-primary/90 text-primary-foreground font-medium rounded-xl",disabled:c||!r.trim()||!n.trim(),children:s(c?"auth.saving":"auth.saveNewPassword")})]})]})})})}export{F as ResetPasswordPage};
