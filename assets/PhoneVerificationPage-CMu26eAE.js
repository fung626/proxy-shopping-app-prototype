import{a as $,u as k,r as s,j as e,B as d,R as g}from"./index-CvO9pKPC.js";import{I as F}from"./input-DnWsiyUA.js";import{L as N}from"./label-Cqb5pUVi.js";import{P as B}from"./phone-input-BD6KTjnM.js";import{P as C}from"./phone-CybxbROp.js";import{C as E}from"./circle-check-big-Dh9XEviq.js";import"./index-BUvxBgzt.js";import"./select-Bn-NFenP.js";import"./index-vsMTD7gr.js";import"./index-CosQv8v_.js";import"./index-B46UinAq.js";import"./Combination-DwCW9mbS.js";import"./index-BS1Kyr__.js";import"./index-wsE_5AEc.js";import"./check-BygKOcWJ.js";function _({phone:r=""}){const v=$(),{t:i}=k(),[V,b]=s.useState(r?2:1),[m,w]=s.useState(r?r.replace(/^\+\d+/,""):""),[x,y]=s.useState(r&&r.match(/^\+\d+/)?.[0]||"+1"),[u,P]=s.useState(""),[o,c]=s.useState(!1),[h,f]=s.useState(0),[a,p]=s.useState(null),[j,D]=s.useState(0);s.useEffect(()=>{const t=setInterval(()=>{if(a){const l=Date.now()-a.getTime(),n=Math.max(0,60-Math.floor(l/1e3));D(n)}},1e3);return()=>clearInterval(t)},[a]);const R=async()=>{c(!0);try{await new Promise(t=>setTimeout(t,1e3)),f(t=>t+1),p(new Date),b(2)}finally{c(!1)}},S=async()=>{c(!0);try{await new Promise(t=>setTimeout(t,1e3)),f(t=>t+1),p(new Date)}finally{c(!1)}},I=()=>{v("/profile")},L=()=>a?Date.now()-a.getTime()>6e4:!0,T=(t,l)=>{const n=l.replace(/\D/g,"");return n.length>=10?`${t} (${n.slice(0,3)}) ${n.slice(3,6)}-${n.slice(6,10)}`:`${t} ${l}`};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"px-4 pb-20",children:e.jsx("div",{className:"max-w-md mx-auto",children:V===1?e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(C,{className:"h-10 w-10 text-primary"})}),e.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-3",children:i("phoneVerification.verifyYourPhone")}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:i("phoneVerification.sendCodeDescription")})]}),e.jsx("div",{className:"space-y-4 mb-8",children:e.jsxs("div",{children:[e.jsx(N,{htmlFor:"phone",children:i("phoneVerification.phoneLabel")}),e.jsx(B,{phoneValue:m,countryCode:x,onPhoneChange:w,onCountryCodeChange:y,placeholder:i("phoneVerification.phonePlaceholder"),required:!0,className:"mt-1",id:"phone"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i("phoneVerification.phoneHint")})]})}),e.jsx(d,{onClick:R,disabled:!m.trim()||o,className:"w-full",children:o?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),i("phoneVerification.sendingCode")]}):i("phoneVerification.sendVerificationCode")})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(C,{className:"h-10 w-10 text-primary"})}),e.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-3",children:i("phoneVerification.enterVerificationCode")}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:i("phoneVerification.codeDescription",{phone:T(x,m)})})]}),e.jsxs("div",{className:"space-y-6 mb-8",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"code",children:i("phoneVerification.verificationCodeLabel")}),e.jsx(F,{id:"code",type:"text",value:u,onChange:t=>P(t.target.value.replace(/\D/g,"").slice(0,6)),placeholder:i("phoneVerification.codePlaceholder"),className:"mt-1 text-center text-2xl tracking-widest",maxLength:6})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[i("phoneVerification.didntReceiveCode"),h>0&&` ${i("phoneVerification.sentCodeCount",{count:h,plural:h>1?"s":""})}`]}),e.jsx(d,{variant:"outline",size:"sm",onClick:S,disabled:o||!L(),children:o?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-2 animate-spin"}),i("phoneVerification.sending")]}):j>0?i("phoneVerification.resendInSeconds",{seconds:j}):i("phoneVerification.resendCode")})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-foreground mb-2",children:i("phoneVerification.smsTips")}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["• ",i("phoneVerification.tip1")]}),e.jsxs("li",{children:["• ",i("phoneVerification.tip2")]}),e.jsxs("li",{children:["• ",i("phoneVerification.tip3")]}),e.jsxs("li",{children:["• ",i("phoneVerification.tip4")]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{onClick:I,disabled:u.length!==6,className:"w-full",children:i("phoneVerification.verifyPhoneNumber")}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:i("phoneVerification.demoMode")}),e.jsxs(d,{variant:"outline",className:"w-full",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),i("phoneVerification.simulateVerified")]})]})]})]})})})})}export{_ as PhoneVerificationPage};
