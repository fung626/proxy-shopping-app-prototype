import{a as w,u as P,r as a,j as e,B as n,w as S}from"./index-CvO9pKPC.js";import{A as C}from"./input-DnWsiyUA.js";import{L as f}from"./label-Cqb5pUVi.js";import{P as k}from"./phone-input-BD6KTjnM.js";import{C as E}from"./circle-check-big-Dh9XEviq.js";import{M as I}from"./mail-BXycqFYU.js";import{P as L}from"./phone-CybxbROp.js";import"./index-BUvxBgzt.js";import"./select-Bn-NFenP.js";import"./index-vsMTD7gr.js";import"./index-CosQv8v_.js";import"./index-B46UinAq.js";import"./Combination-DwCW9mbS.js";import"./index-BS1Kyr__.js";import"./index-wsE_5AEc.js";import"./check-BygKOcWJ.js";function Q(){const d=w(),{t}=P(),[s,g]=a.useState("email"),[r,j]=a.useState(""),[i,b]=a.useState(""),[l,N]=a.useState("+1"),[v,u]=a.useState(!1),[h,x]=a.useState(!1),[p,o]=a.useState(""),y=async c=>{if(c.preventDefault(),o(""),s==="email"&&!r){o(t("auth.enterEmailAddress"));return}if(s==="phone"&&!i){o(t("auth.enterPhoneNumber"));return}x(!0);try{if(s==="email"){const{error:m}=await S.forgotPassword(r);if(m)throw new Error(m.message)}else console.log("Password reset requested for phone:",`${l}${i}`);u(!0)}catch(m){o(m.message||t("auth.resetEmailFailed"))}finally{x(!1)}};return v?e.jsx("div",{className:"min-h-screen bg-background flex flex-col",children:e.jsx("div",{className:"flex-1 px-4 py-6",children:e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(E,{className:"h-8 w-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-3",children:t("auth.resetLinkSent")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:s==="email"?t("auth.resetLinkSentDescription",{contact:r}):t("auth.resetCodeSentDescription",{contact:`${l}${i}`})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{onClick:()=>u(!1),variant:"outline",className:"w-full",children:t("auth.tryDifferentMethod")}),e.jsx(n,{onClick:()=>d("/auth/signin"),className:"w-full bg-primary hover:bg-primary/90",children:t("auth.backToSignIn")})]})]})})}):e.jsx("div",{className:"min-h-screen bg-background flex flex-col",children:e.jsx("div",{className:"flex-1 px-4 py-6",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:s==="email"?e.jsx(I,{className:"h-8 w-8 text-primary"}):e.jsx(L,{className:"h-8 w-8 text-primary"})}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:t("auth.forgotPasswordTitle")}),e.jsx("p",{className:"text-muted-foreground",children:t(s==="email"?"auth.resetPasswordEmailDescription":"auth.resetPasswordPhoneDescription")})]}),p&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:e.jsx("p",{className:"text-red-800 text-sm",children:p})}),e.jsxs("form",{onSubmit:y,className:"space-y-5",children:[s==="email"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(f,{htmlFor:"email",className:"text-sm font-medium text-foreground",children:t("auth.emailAddress")}),e.jsx(C,{id:"email",type:"email",value:r,onChange:c=>j(c.target.value),placeholder:t("auth.enterEmailAddress"),required:!0})]}),s==="phone"&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(f,{htmlFor:"phone",className:"text-sm font-medium text-foreground",children:t("auth.phoneNumber")}),e.jsx(k,{phoneValue:i,countryCode:l,onPhoneChange:b,onCountryCodeChange:N,required:!0,variant:"auth"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(n,{type:"button",variant:"link",onClick:()=>g(s==="email"?"phone":"email"),className:"p-0 h-auto text-sm font-medium text-primary",children:t(s==="email"?"auth.usePhoneInstead":"auth.useEmailInstead")})}),e.jsx(n,{type:"submit",className:"w-full h-12 bg-primary hover:bg-primary/90 text-primary-foreground font-medium rounded-xl",disabled:h||(s==="email"?!r.trim():!i.trim()),children:t(h?"auth.sending":"auth.sendResetLink")})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("span",{className:"text-muted-foreground text-sm",children:[t("auth.rememberPassword")," "]}),e.jsx(n,{variant:"link",onClick:()=>d("/auth/signin"),className:"p-0 h-auto text-primary text-sm font-medium",children:t("auth.signIn")})]})]})})})}export{Q as ForgotPasswordPage};
